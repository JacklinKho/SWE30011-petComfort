<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<title>Smart Pet Home</title>
		<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css') }}" />
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	</head>
	<body>
        <div class="container2">
			<img src="../static/images/global.png" alt="Global" class="title-background" />
			<h1 class="title">Global Control</h1>
<div id="controlContainer">
    <div>
        <h2>Control the Room</h2>

        <!-- Tab content -->
        <div id="tab4" class="tabcontent" style="display: block">
            <div class="control-panel">
                <div class="device-controls">
                    <div class="device-control">
                        <h2>
                            <label for="lightToggle">Light</label>
                        </h2>
                        <div>
                            <label class="switch">
                                <input type="checkbox" id="lightToggleGlobal" onchange="toggleGlobal()" />
                                <span class="slider round"></span>
                            </label>
                        </div>
                    </div>
                    <div class="device-control">
                        <h2>
                            <label for="fanToggle">Fan</label>
                        </h2>
                        <div>
                            <label class="switch">
                                <input type="checkbox" id="fanToggleGlobal" onchange="toggleGlobal()" />
                                <span class="slider round"></span>
                            </label>
                        </div>
                    </div>
                    <div class="device-control">
                        <h2>
                            <label for="windowToggle">Window</label>
                        </h2>
                        <div>
                            <label class="switch">
                                <input type="checkbox" id="windowToggleGlobal" onchange="toggleGlobal()" />
                                <span class="slider round"></span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
</div>
</div>

<script>
    			function sendGlobalControlCommand(light, fan, window) {
				console.log("controlcommand");
				$.ajax({
					type: "POST",
					url: "/globalControl",
					data: {
						light: light,
						fan: fan,
						window: window,
					},
					success: function (response) {
						console.log(response);
					},
					error: function (xhr, status, error) {
						console.error(xhr.responseText);
					},
				});
			}

    			function toggleGlobal() {
				var lightState = document.getElementById("lightToggleGlobal").checked;
				var fanState = document.getElementById("fanToggleGlobal").checked;
				var windowState = document.getElementById("windowToggleGlobal").checked;
				sendGlobalControlCommand(lightState, fanState, windowState);
			}
</script>
    </body>
    </html>
    